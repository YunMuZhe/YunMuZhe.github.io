# 将URL输入到浏览器上并敲回车后到浏览器显示内容，一共经历了哪些内容
1. 域名解析
    1. 浏览器搜索自己的DNS缓存，缓存中维护了一张域名与IP地址对应的表。
    2. 如果在DNS缓存中没有查到，则去操作系统的DNS缓存中查找
    3. 如果依然没有，则将域名发送至本地域名服务器（递归查询方式），本地域名服务器查询自己的DNS缓存
    4. 如果没有，则本地域名服务器会向后继续递归查找
        1. 向根域名服务器发送请求，根域名服务器返回.com域的顶级域名服务器地址
        2. 向.com域的域名服务器发送请求，返回权威名域名服务器的服务器地址
        3. 向权威域名服务器地址发送请求，得到IP地址
    5. 本地域名服务器将IP地址发送到操作系统并将其缓存下来
    6. 操作系统将IP地址发送到浏览器并将其缓存下来
    7. 浏览器拿到IP地址
2. 浏览器发送HTTP请求
3. **传输层**：选择发送协议，UDP还是TCP，TCP是可靠的面向连接的传输协议，对HTTP请求进行封装，加入了端口号等信息；而UDP则不是面向连接的，
4. **网络层**：通过IP协议将IP地址封装为IP数据报；然后会用到ARP协议（Address Resolution Protocol，及地址解析协议），主机将包含有目标IP地址的IP数据报全网广播，并接收返回信息，确定目标的物理地址，获得目标地址的MAC地址
5. **数据链路层**：把网络层交下来的IP数据报添加首位封装为MAC帧，根据目的MAC地址来建立TCP连接，三次握手确定之后，接收端在拿到物理层上交的比特流之后，根据首尾标记，识别帧的开始和结束，将中间的数据上交到网络层，然后层层向上传递到应用层
6. 服务端响应请求并请求客户端请求的数据，传回客户端
7. 断开TCP连接，浏览器开始渲染页面呈现给用户


### 各DNS服务器的含义
比如 segmentfault.com

「浏览器」查询浏览器缓存和系统缓存>>有缓存则返回结果（完毕）

「浏览器」没有缓存>>

「浏览器」向「递归DNS服务器」查询>>

「递归DNS服务器」查询缓存>>有缓存则返回结果（完毕）

「递归DNS服务器」没有缓存>>

「递归DNS服务器」向「根服务器」查询「.com的权威DNS服务器」的地址>>

「递归DNS服务器」向「.com的权威DNS服务器」查询「segmentfault.com所使用的权威DNS服务器」的地址>>

「递归DNS服务器」向「segmentfault.com所使用的权威DNS服务器」查询解析获得DNS记录并缓存>>

「递归DNS服务器」向「浏览器」返回结果（完毕）

---------

「递归DNS服务器」就是公众DNS服务器，你在电脑或路由器设置的，比如运营商的DNS服务器或者114DNS服务器这种。

「根服务器」就是大名鼎鼎的13个根服务器那个。

「.com的权威DNS服务器」就是记录各个.com的域名所使用的「网站所使用的权威DNS服务器」的地方。归这个根域名的注册局管理。（别的根域名也有自己的权威DNS服务器）

「网站所使用的权威DNS服务器」就是网站的权威DNS服务器，记录网站的DNS记录的地方，你可以看看DNSPod。

「域名」「IP地址」「根服务器」归ICANN和IANA管理

# UDP 和 TCP 的区别

UDP协议无需握手，速度快，消耗少，但是无确保机制，易丢包；TCP三次握手，速度慢消耗多，但是可以确保消息正确发送。

TCP（Transmission Control Protocol，传输控制协议）是基于连接的协议，也就是说，在正式收发数据前，必须和对方建立可靠的连接。一个TCP连接必须要经过三次“对话”才能建立起来，其中的过程非常复杂，我们这里只做简单、形象的介绍，你只要做到能够理解这个过程即可。我们来看看这三次对话的简单过程：主机A向主机B发出连接请求数据包：“我想给你发数据，可以吗？”，这是第一次对话；主机B向主机A发送同意连接和要求同步（同步就是两台主机一个在发送，一个在接收，协调工作）的数据包：“可以，你什么时候发？”，这是第二次对话；主机A再发出一个数据包确认主机B的要求同步：“我现在就发，你接着吧！”，这是第三次对话。三次“对话”的目的是使数据包的发送和接收同步，经过三次“对话”之后，主机A才向主机B正式发送数据。

UDP（User Data Protocol，用户数据报协议）是与TCP相对应的协议。它是面向非连接的协议，它不与对方建立连接，而是直接就把数据包发送过去。

UDP适用于一次只传送少量数据、对可靠性要求不高的应用环境。

#  四次挥手，会出现哪些问题，如果过程中服务器宕机会出现什么问题，怎么去解决。